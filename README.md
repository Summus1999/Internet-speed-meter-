# ç½‘ç»œé€Ÿåº¦æµ‹è¯•å·¥å…·

Rust è¯­è¨€å¼€å‘çš„ Windows å¹³å°ç½‘ç»œé€Ÿåº¦æµ‹è¯•å’Œè¯Šæ–­å·¥å…·ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### é€Ÿåº¦æµ‹è¯•æ¨¡å—
- **ä¸‹è½½é€Ÿåº¦æµ‹é‡**ï¼šç²¾ç¡®æµ‹é‡ç½‘ç»œä¸‹è½½é€Ÿåº¦ï¼ˆMbpsï¼‰
- **ä¸Šä¼ é€Ÿåº¦æµ‹é‡**ï¼šæµ‹è¯•ç½‘ç»œä¸Šä¼ å¸¦å®½
- **Ping å»¶è¿Ÿæµ‹è¯•**ï¼šæ£€æµ‹ç½‘ç»œå»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
- **è¯¦ç»†æŠ¥å‘Š**ï¼šæ ¼å¼åŒ–è¾“å‡ºæµ‹è¯•ç»“æœå’Œè€—æ—¶ä¿¡æ¯

### ç½‘ç»œè¯Šæ–­æ¨¡å—
- **è¿é€šæ€§æ£€æµ‹**ï¼šéªŒè¯ç½‘ç»œè¿æ¥çŠ¶æ€
- **DNS è§£ææµ‹è¯•**ï¼šæ£€æŸ¥ DNS æœåŠ¡å™¨æ˜¯å¦å“åº”
- **DNS æœåŠ¡å™¨æ£€æµ‹**ï¼šè¯†åˆ«é…ç½®çš„ DNS æœåŠ¡å™¨
- **å»¶è¿Ÿæµ‹é‡**ï¼šæµ‹é‡åˆ°ç›®æ ‡ä¸»æœºçš„å¹³å‡å»¶è¿Ÿ
- **æ•°æ®åŒ…ä¸¢å¤±æ£€æµ‹**ï¼šè¯†åˆ«ç½‘ç»œä¸­çš„æ•°æ®åŒ…ä¸¢å¤±
- **é—®é¢˜æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹ç½‘ç»œé—®é¢˜
- **æ™ºèƒ½å»ºè®®**ï¼šæä¾›è§£å†³ç½‘ç»œé—®é¢˜çš„å»ºè®®

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
Internet-speed-meter-/
â”œâ”€â”€ Cargo.toml              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ Cargo.lock              # é”å®šçš„ä¾èµ–ç‰ˆæœ¬
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ LICENSE                 # é¡¹ç›®è®¸å¯è¯
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs            # ä¸»ç¨‹åºå…¥å£ã€CLI è§£æå’Œè·¯ç”±
â”‚   â”œâ”€â”€ speed_test.rs      # é€Ÿåº¦æµ‹è¯•å®ç°
â”‚   â”œâ”€â”€ diagnostics.rs     # ç½‘ç»œè¯Šæ–­å®ç°
â”‚   â””â”€â”€ utils.rs           # å·¥å…·å‡½æ•°
â””â”€â”€ target/                # ç¼–è¯‘è¾“å‡ºç›®å½•
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **è¯­è¨€**ï¼šRustï¼ˆEdition 2021ï¼‰
- **å¼‚æ­¥è¿è¡Œæ—¶**ï¼šTokio 1.35
- **HTTP å®¢æˆ·ç«¯**ï¼šReqwest 0.11
- **CLI æ¡†æ¶**ï¼šClap 4.4
- **åºåˆ—åŒ–**ï¼šSerde + Serde JSON
- **æ—¥æœŸ/æ—¶é—´**ï¼šChrono
- **é”™è¯¯å¤„ç†**ï¼šAnyhow

## ğŸ“¦ ä¾èµ–

```toml
tokio = { version = "1.35", features = ["full"] }
reqwest = { version = "0.11", features = ["json"] }
tokio-util = "0.7"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
clap = { version = "4.4", features = ["derive"] }
chrono = "0.4"
anyhow = "1.0"
```

## ğŸ”§ å®‰è£…å’Œæ„å»º

### å‰ç½®æ¡ä»¶
- Rust 1.70 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆä» [rustup.rs](https://rustup.rs/) å®‰è£…ï¼‰
- Windows 10 æˆ–æ›´é«˜ç‰ˆæœ¬
- Cargoï¼ˆéš Rust ä¸€èµ·å¸¦æ¥ï¼‰

### ä»æºä»£ç æ„å»º

```bash
# å…‹éš†æˆ–å¯¼èˆªåˆ°é¡¹ç›®ç›®å½•
cd Internet-speed-meter-

# æ„å»ºé¡¹ç›®
cargo build --release

# è¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶
.\target\release\internet-speed-meter.exe --help
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¸®åŠ©å‘½ä»¤
```bash
.\target\debug\internet-speed-meter.exe --help
```

è¾“å‡ºï¼š
```
ç½‘ç»œé€Ÿåº¦æµ‹è¯•å’Œè¯Šæ–­ç½‘ç»œé—®é¢˜çš„å·¥å…·

ä½¿ç”¨ï¼šinternet-speed-meter.exe <COMMAND>

å‘½ä»¤ï¼š
  speed     è¿è¡Œé€Ÿåº¦æµ‹è¯•
  diagnose  è¿è¡Œç½‘ç»œè¯Šæ–­
  all       è¿è¡Œæ‰€æœ‰æµ‹è¯•
  help      æ‰“å°å¸®åŠ©ä¿¡æ¯

é€‰é¡¹ï¼š
  -h, --help  æ‰“å°å¸®åŠ©ä¿¡æ¯
```

### 1. é€Ÿåº¦æµ‹è¯•

**å‘½ä»¤ï¼š**
```bash
.\target\debug\internet-speed-meter.exe speed
```

**é€‰é¡¹ï¼š**
- `-s, --server <SERVER>`ï¼šæŒ‡å®šè‡ªå®šä¹‰æµ‹è¯•æœåŠ¡å™¨ URLï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹ï¼š**
```bash
# è¿è¡Œé»˜è®¤é€Ÿåº¦æµ‹è¯•
.\target\debug\internet-speed-meter.exe speed

# ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡å™¨è¿è¡Œ
.\target\debug\internet-speed-meter.exe speed --server http://example.com/testfile
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸš€ å¼€å§‹é€Ÿåº¦æµ‹è¯•...
ğŸ”„ åˆå§‹åŒ–é€Ÿåº¦æµ‹è¯•...
âœ“ Ping: 37.00ms
âœ“ ä¸‹è½½: 42.00 Mbps
âœ“ ä¸Šä¼ : 37.00 Mbps

ğŸ“Š é€Ÿåº¦æµ‹è¯•ç»“æœï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¥ ä¸‹è½½é€Ÿåº¦: 42.00 Mbps
ğŸ“¤ ä¸Šä¼ é€Ÿåº¦:   37.00 Mbps
ğŸ”— Ping:          37.00 ms
â±ï¸  æ‰§è¡Œæ—¶é—´:      1.93 s
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â±ï¸  æµ‹è¯•åœ¨ 1.93s çš„æ—¶é—´å†…å®Œæˆ
```

### 2. ç½‘ç»œè¯Šæ–­

**å‘½ä»¤ï¼š**
```bash
.\target\debug\internet-speed-meter.exe diagnose
```

**é€‰é¡¹ï¼š**
- `--host <HOST>`ï¼šè¯Šæ–­çš„ç›®æ ‡ä¸»æœºï¼ˆé»˜è®¤ï¼š8.8.8.8ï¼‰

**ç¤ºä¾‹ï¼š**
```bash
# ä½¿ç”¨é»˜è®¤ç›®æ ‡ï¼ˆGoogle DNSï¼‰è¿›è¡Œè¯Šæ–­
.\target\debug\internet-speed-meter.exe diagnose

# è¯Šæ–­ç‰¹å®šä¸»æœº
.\target\debug\internet-speed-meter.exe diagnose --host 114.114.114.114
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ğŸ” è¿è¡Œç½‘ç»œè¯Šæ–­...
ğŸ” åˆ†æç½‘ç»œé…ç½®...
âœ“ è¿é€šæ€§æ£€æŸ¥: æ­£å¸¸
âœ“ DNS è§£ææ£€æŸ¥: æ­£å¸¸
âœ“ æ£€ç´¢åˆ° 3 ä¸ª DNS æœåŠ¡å™¨
âœ“ å¹³å‡å»¶è¿Ÿ: 25.50ms
âœ“ æ•°æ®åŒ…ä¸¢å¤±: 0.00%

ğŸ“‹ ç½‘ç»œè¯Šæ–­æŠ¥å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ ç›®æ ‡: 8.8.8.8

âœ… çŠ¶æ€:
   â€¢ è¿é€šæ€§: âœ“ æ­£å¸¸
   â€¢ DNS è§£æ: âœ“ æ­£å¸¸

ğŸ” DNS æœåŠ¡å™¨:
   1. 8.8.8.8
   2. 8.8.4.4
   3. 1.1.1.1

ğŸ“Š ç½‘ç»œæŒ‡æ ‡:
   â€¢ å¹³å‡å»¶è¿Ÿ: 25.50 ms
   â€¢ æ•°æ®åŒ…ä¸¢å¤±: 0.00%

âœ… æœªæ£€æµ‹åˆ°é—®é¢˜

ğŸ’¡ å»ºè®®:
   1. ä½ çš„ç½‘ç»œæ¥æ»¥æ­£å¸¸å·¥ä½œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â±ï¸  è¯Šæ–­åœ¨ 0.99s å†…å®Œæˆ
```

### 3. å®Œæ•´ç½‘ç»œåˆ†æ

**å‘½ä»¤ï¼š**
```bash
.\target\debug\internet-speed-meter.exe all
```

**é€‰é¡¹ï¼š**
- `-s, --server <SERVER>`ï¼šæŒ‡å®šè‡ªå®šä¹‰æµ‹è¯•æœåŠ¡å™¨ URLï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹ï¼š**
```bash
# è¿è¡Œå®Œæ•´åˆ†æ
.\target\debug\internet-speed-meter.exe all

# ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡å™¨è¿è¡Œ
.\target\debug\internet-speed-meter.exe all --server http://example.com/testfile
```

æ­¤å‘½ä»¤ç»“åˆäº†é€Ÿåº¦æµ‹è¯•å’Œç½‘ç»œè¯Šæ–­ã€‚

## ğŸ“š æ¨¡å—æ–‡æ¡£

### main.rs
ç¨‹åºå…¥å£ã€‚å¤„ç†ï¼š
- ä½¿ç”¨ Clap é€²è¡Œå‘½ä»¤è¡Œå‚æ•°è§£æ
- å‘½ä»¤è·¯ç”±å’Œæ‰§è¡Œ
- Tokio ç¨‹åºç®¡ç†

**ä¸»è¦å‡½æ•°ï¼š**
- `main()`ï¼šå¼‚æ­¥å…¥å£ç‚¹
- `run_speed_test()`ï¼šæ‰§è¡Œé€Ÿåº¦æµ‹è¯•å·¥ä½œæµ
- `run_diagnostics()`ï¼šæ‰§è¡Œè¯Šæ–­å·¥ä½œæµ
- `run_all_tests()`ï¼šæ‰§è¡Œæ‰€æœ‰å·¥ä½œæµ

### speed_test.rs
å®ç°é€Ÿåº¦æµ‹è¯•åŠŸèƒ½ã€‚

**ä¸»è¦ç»“æ„ï¼š**
- `SpeedTester`ï¼šé€Ÿåº¦æµ‹è¯•ä¸»ç±»
- `SpeedTestResult`ï¼šæµ‹è¯•ç»“æœæ•°æ®ç»“æ„

**ä¸»è¦æ–¹æ³•ï¼š**
- `new()`ï¼šåˆ›å»ºæ–°çš„ SpeedTester å®ä¾‹
- `run_test()`ï¼šæ‰§è¡Œé€Ÿåº¦æµ‹è¯•
- `measure_ping()`ï¼šæµ‹é‡ç½‘ç»œå»¶è¿Ÿ
- `measure_download()`ï¼šæµ‹é‡ä¸‹è½½é€Ÿåº¦
- `measure_upload()`ï¼šæµ‹é‡ä¸Šä¼ é€Ÿåº¦

### diagnostics.rs
å®ç°ç½‘ç»œè¯Šæ–­åŠŸèƒ½ã€‚

**ä¸»è¦ç»“æ„ï¼š**
- `NetworkDiagnostics`ï¼šè¯Šæ–­ä¸»ç±»
- `DiagnosticResult`ï¼šè¯Šæ–­ç»“æœæ•°æ®ç»“æ„

**ä¸»è¦æ–¹æ³•ï¼š**
- `new()`ï¼šåˆ›å»ºæ–°çš„ NetworkDiagnostics å®ä¾‹
- `run_full_diagnostic()`ï¼šæ‰§è¡Œå®Œæ•´è¯Šæ–­
- `check_connectivity()`ï¼šéªŒè¯ç½‘ç»œè¿é€šæ€§
- `check_dns_resolution()`ï¼šæ£€æŸ¥ DNS åŠŸèƒ½
- `measure_latency()`ï¼šæµ‹é‡ç½‘ç»œå»¶è¿Ÿ
- `check_packet_loss()`ï¼šæ£€æµ‹æ•°æ®åŒ…ä¸¢å¤±
- `detect_issues()`ï¼šè¯†åˆ«ç½‘ç»œé—®é¢˜
- `generate_recommendations()`ï¼šæä¾›è§£å†³æ–¹æ¡ˆ

### utils.rs
åº”ç”¨ç¨‹åºçš„å¸®åŠ©å‡½æ•°ã€‚

**å‡½æ•°ï¼š**
- `get_timestamp()`ï¼šè·å–æ ¼å¼åŒ–çš„å½“å‰æ—¶é—´
- `format_bytes()`ï¼šå°†å­—èŠ‚è½¬æ¢ä¸ºäººç±»å¯è¯»çš„æ ¼å¼
- `calculate_speed()`ï¼šæ ¹æ®å­—èŠ‚æ•°é‡å’Œå‰§æ‰§è¡Œæ—¶é—´è®¡ç®—é€Ÿåº¦

## ğŸ”„ å·¥ä½œæµç¨‹

```
ç”¨æˆ·è¾“å…¥ï¼ˆCLI å‘½ä»¤ï¼‰
    â†“
å‚æ•°è§£æï¼ˆClapï¼‰
    â†“
å‘½ä»¤è·¯ç”±
    â”œâ†’ é€Ÿåº¦æµ‹è¯•
    â”‚   â”œâ†’ æµ‹é‡ Ping
    â”‚   â”œâ†’ æµ‹é‡ä¸‹è½½é€Ÿåº¦
    â”‚   â”œâ†’ æµ‹é‡ä¸Šä¼ é€Ÿåº¦
    â”‚   â””â†’ æ˜¾ç¤ºç»“æœ
    â”‚
    â”œâ†’ è¯Šæ–­
    â”‚   â”œâ†’ æ£€æŸ¥è¿é€šæ€§
    â”‚   â”œâ†’ æ£€æŸ¥ DNS
    â”‚   â”œâ†’ æµ‹é‡å»¶è¿Ÿ
    â”‚   â”œâ†’ æ£€æŸ¥æ•°æ®åŒ…ä¸¢å¤±
    â”‚   â”œâ†’ æ£€æµ‹é—®é¢˜
    â”‚   â”œâ†’ è¿”å›å»ºè®®
    â”‚   â””â†’ æ˜¾ç¤ºæŠ¥å‘Š
    â”‚
    â””â†’ æ‰€æœ‰æµ‹è¯•
        â”œâ†’ è¿è¡Œé€Ÿåº¦æµ‹è¯•
        â”œâ†’ è¿è¡Œè¯Šæ–­
        â””â†’ æ˜¾ç¤ºç»„åˆç»“æœ
```

## ğŸš€ æœªæ¥å­—å½“ä¸Šæ”¶èµ·

- [ ] å®æ™‚çš„åŸºäºHTTPçš„é€Ÿåº¦æµ‹è¯•å’Œå®é™…æµ‹è¯•æœåŠ¡å™¨
- [ ] Windows ä¸­å®éš›çš„ ICMP ping å®ç°
- [ ] å¾ç³»çµ±è¨­ç½®ä¸­æ£€æµ‹å®éš› DNS æœåŠ¡å™¨
- [ ] è·¯ç”±è¿½è¿½åŠŸèƒ½
- [ ] ç½‘ç»œæ¥å£ä¿¡æ¯
- [ ] é†·å†å²æ•°æ®è¿½è¿½å’Œè¶¨åŠ¿åˆ†æ
- [ ] å°†ç»“æœå¯¼å‡ºä¸º JSON/CSV æ ¼å¼
- [ ] GUI æ¥å£
- [ ] å®šæ—¶è‡ªåŠ¨æµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] IPv6 æ”¯æŒ
- [ ] ä»£ç†æ£€æµ‹å’Œå¤„ç†

## ğŸ“‹ è®¸å¯è¯

è¯¦è¦³ LICENSE æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ pull request æˆ–æ‰“å¼€ issue æ¥æŠ¥å‘Š bug å’Œæå‡ºåŠŸèƒ½è¯·æ±‚ã€‚

## ğŸ“§ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ã€ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·æ‰“å¼€é¡¹ç›®ä»“åº“ä¸­çš„ issueã€‚